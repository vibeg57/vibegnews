from flask import Flask, request
import requests

app = Flask(__name__)

# –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω Telegram!
TELEGRAM_TOKEN = "7944320544:AAESvvcWqGi7kaPlRbON3WwAq_WMsjEcH3Y"
BASE_URL = f"https://api.telegram.org/bot{TELEGRAM_TOKEN}"

menu = {
    "–ò—Å—Ç–æ—Ä–∏—è": "–õ–∞–∑—É—Ä–Ω–æ–µ ‚Äî —É—é—Ç–Ω—ã–π –ø–æ—Å–µ–ª–æ–∫ –Ω–∞ –±–µ—Ä–µ–≥—É –ß–µ—Ä–Ω–æ–≥–æ –º–æ—Ä—è –≤ –•–µ—Ä—Å–æ–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏. –û—Å–Ω–æ–≤–∞–Ω –≤ 1803 –≥–æ–¥—É, –∏–∑–≤–µ—Å—Ç–µ–Ω —Å–≤–æ–∏–º–∏ –ø–ª—è–∂–∞–º–∏ –∏ –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–æ–º. –í —Ä–∞–∑–¥–µ–ª–µ –ò—Å—Ç–æ—Ä–∏—è –≤—ã –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç—ã –ü—Ä–∏—á–µ—Ä–Ω–æ–º–æ—Ä—å—è, –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏–ª–∏ –ø—Ä–æ—Å–ª—É—à–∞—Ç—å –Ω–∞ —Å–∞–π—Ç–µ vibegnews.tilda.ws –∫–Ω–∏–≥–∏ –æ –õ–∞–∑—É—Ä–Ω–æ–º.",
    "–î–æ–º–æ–≤–æ–¥—Å—Ç–≤–æ": "–í —Ä–∞–∑–¥–µ–ª–µ –î–æ–º–æ–≤–æ–¥—Å—Ç–≤–æ –≤–∞—à–µ–º—É –≤–Ω–∏–º–∞–Ω–∏—é –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç—Å—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –ø–æ —É—é—Ç—É –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –¥–æ–º–µ, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏ —Å–µ–º–µ–π–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞, –≤–∏–Ω–æ–≥—Ä–∞–¥–∞—Ä—Å—Ç–≤—É. –ù–∞–ø—Ä–∏–º–µ—Ä: –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–∞–¥–æ–≤–æ–¥–∞, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –æ–±–º–µ–Ω—è—Ç—å –¥–µ–Ω—å–≥–∏, –∫–∞–∫ –≤—ã–±—Ä–∞—Ç—å —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è, –º–æ–∂–Ω–æ –ª–∏ –±–æ—Ä–æ—Ç—å—Å—è —Å —Ä–∞—Å—Ç—Ä–µ—Å–∫–∏–≤–∞–Ω–∏–µ–º —è–≥–æ–¥ –≤–∏–Ω–æ–≥—Ä–∞–¥–∞.",
    'IT –¥–ª—è "—á–∞–π–Ω–∏–∫–æ–≤"': "–í —Ä–∞–∑–¥–µ–ª–µ IT –¥–ª—è ¬´—á–∞–π–Ω–∏–∫–æ–≤¬ª: –ø—Ä–æ—Å—Ç—ã–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º, —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–º –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º. –ù–∞–ø—Ä–∏–º–µ—Ä: —Å–º–∞—Ä—Ç—Ñ–æ–Ω –¥–ª—è –ø–æ–∂–∏–ª—ã—Ö, —Å—Ç–∞—Ç—å–∏ –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º, –æ—Å–≤–æ–µ–Ω–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.",
    "FAQ": "–í —á–∞—Ç–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–º–æ—â–Ω–∏–∫–æ–º telegram_bota https://t.me/vibeg52bot. FAQ —Å–∞–π—Ç–∞: vibegnews.tilda.ws",
    "–û –±–æ—Ç–µ": "–ë–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –ø–æ–º–æ—â–Ω–∏–∫–æ–º —Å–∞–π—Ç–∞ https://vibegnews.tilda.ws –∏ –¥–∞—ë—Ç –æ—Ç–≤–µ—Ç—ã –ø–æ –µ–≥–æ —Ç–µ–º–∞–º –∏ –¥—Ä—É–≥–∏–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –µ–≥–æ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏."
}

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∫–Ω–æ–ø–∫–∏ (–≤ –≤–∏–¥–µ ReplyKeyboard)
MAIN_MENU = [[k for k in menu.keys()]]

@app.route('/webhook', methods=['POST'])
def webhook():
    data = request.json
    message = data.get('message', {})
    chat_id = message.get('chat', {}).get('id')
    user_message = message.get('text', '').strip()

    # –ß—Ç–æ–±—ã –±–æ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–º–∞–Ω–¥—ã/–∫–Ω–æ–ø–∫–∏:
    if user_message in menu:
        reply_text = menu[user_message]
        # –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ –º–µ–Ω—é —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è.
        reply_markup = {"remove_keyboard": True}
    else:
        reply_text = "üëã –ü—Ä–∏–≤–µ—Ç! –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –º–µ–Ω—é:"
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        reply_markup = {"keyboard": MAIN_MENU, "resize_keyboard": True}

    requests.post(
        f"{BASE_URL}/sendMessage",
        json={
            "chat_id": chat_id,
            "text": reply_text,
            "reply_markup": reply_markup
        }
    )
    return "ok"

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)



